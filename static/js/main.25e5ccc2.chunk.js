(this.webpackJsonpsignets=this.webpackJsonpsignets||[]).push([[0],{154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},284:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),i=n(15),a=n.n(i),s=(n(154),n(33)),o=n(28),u=n(19),l=(n(155),n(156),n(334)),j=n(321),d=n(9),b=(n(286),n(130)),f={apiKey:"AIzaSyCoWgkBcWdz_M9GjEr5TE-b7tJfejQy1JI",authDomain:"react-iwra.firebaseapp.com",projectId:"react-iwra",storageBucket:"react-iwra.appspot.com",messagingSenderId:"422100533764",appId:"1:422100533764:web:5cb055c9062799e8812b51"},p="signets-utilisateurs",O="dossiers";0===d.a.apps.length&&d.a.initializeApp(f);var h=d.a.auth(),m=d.a.firestore(),x=new b.a.AuthUI(h);n(166);function v(e){h.onAuthStateChanged((function(t){var n,r,c;e(t),null!==t&&(n=t.uid,r=t.displayName,c=t.email,m.collection(p).doc(n).set({nom:r,courriel:c},{merge:!0}))}))}var g=n(8);function y(e){var t=e.utilisateur;return Object(g.jsxs)("header",{className:"Entete",children:[Object(g.jsxs)("div",{className:"logo",children:["Signets",Object(g.jsx)(j.a,{variant:"outlined",size:"small",className:"btnDeconnexion",onClick:function(){h.signOut()},children:"D\xe9connexion"})]}),Object(g.jsxs)("div",{className:"utilisateur",children:[t.displayName," ",Object(g.jsx)(l.a,{className:"avatar",alt:t.displayName,src:t.photoURL})]})]})}n(172);function N(){return Object(r.useEffect)((function(){return e="#fbui",void x.start(e,{signInOptions:[d.a.auth.GoogleAuthProvider.PROVIDER_ID],signInFlow:"popup"});var e}),[]),Object(g.jsxs)("div",{className:"Accueil",children:[Object(g.jsxs)("h3",{className:"logo",children:["Signets ",Object(g.jsx)("span",{children:"(beta)"})]}),Object(g.jsxs)("h2",{className:"amorce",children:["Organisez vos signets Web, ",Object(g.jsx)("br",{}),"Un jeu d'enfant"]}),Object(g.jsx)("div",{id:"fbui"})]})}n(173),n(174);var w=n(325),D=n(133),k=n.n(D),A=n(134),C=n.n(A),I=n.p+"static/media/couverture-defaut.3fd73ce6.jpg",S=n(30),E=n.n(S),z=n(55);function F(){return(F=Object(z.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.abrupt("return",m.collection(p).doc(t).collection(O).get().then((function(e){e.forEach((function(e){return n.push(Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id}))}))})).then((function(){return n})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(z.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.collection(p).doc(t).collection(O).doc(n).delete());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(z.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.modification=d.a.firestore.FieldValue.serverTimestamp(),e.abrupt("return",m.collection(p).doc(t).collection(O).add(n).then((function(e){return e.get()})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){var t=e.id,n=e.titre,r=e.couleur,c=e.modification,i=e.couverture,a=e.supprimerDossier;return Object(g.jsxs)("article",{className:"Dossier",style:{backgroundColor:r},children:[Object(g.jsxs)("div",{className:"couverture",children:[Object(g.jsx)(w.a,{className:"deplacer","aria-label":"d\xe9placer",disableRipple:!0,children:Object(g.jsx)(k.a,{})}),Object(g.jsx)("img",{src:i||I,alt:n})]}),Object(g.jsxs)("div",{className:"info",children:[Object(g.jsx)("h2",{children:n}),Object(g.jsxs)("p",{children:["Modifi\xe9 : ",M(c)]})]}),Object(g.jsx)(w.a,{className:"modifier","aria-label":"modifier",size:"small",children:Object(g.jsx)(C.a,{onClick:function(){return a(t)}})})]})}function M(e){var t=e?new Date(1e3*e.seconds):new Date,n=t.getDate(),r=["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"][t.getMonth()],c=t.getFullYear();return"".concat(n," ").concat(r," ").concat(c)}function B(e){var t=e.utilisateur,n=e.dossiers,c=e.setDossiers;function i(e){(function(e,t){return R.apply(this,arguments)})(t.uid,e).then((function(){c(n.filter((function(t){return t.id!==e})))}))}return Object(r.useEffect)((function(){return function(e){return F.apply(this,arguments)}(t.uid).then((function(e){return c(e)}))}),[]),Object(g.jsx)("ul",{className:"ListeDossiers",children:n.map((function(e){return Object(g.jsx)("li",{children:Object(g.jsx)(J,Object(s.a)(Object(s.a)({},e),{},{uid:t.uid,supprimerDossier:i}))},e.id)}))})}var T=n(329),U=n(139),G=n.n(U),L=n(330),P=n(332),V=n(328),_=n(327),K=n(333),Q=n(140);function Y(e){var t=e.ouvert,n=e.setOuvert,c=e.gererAjoutDossier,i=Object(r.useState)(""),a=Object(u.a)(i,2),s=a[0],o=a[1],l=Object(r.useState)(""),d=Object(u.a)(l,2),b=d[0],f=d[1],p=Object(r.useState)("#f00"),O=Object(u.a)(p,2),h=O[0],m=O[1],x=function(){n(!1),o(""),f(""),m("#f00")};return Object(g.jsxs)(P.a,{open:t,onClose:x,"aria-labelledby":"form-dialog-title",children:[Object(g.jsx)(K.a,{id:"form-dialog-title",children:"Ajouter dossier"}),Object(g.jsxs)(_.a,{children:[Object(g.jsx)(L.a,{autoFocus:!0,margin:"dense",id:"titre",label:"Titre du dossier",type:"text",fullWidth:!0,onChange:function(e){return o(e.target.value)}}),Object(g.jsx)(L.a,{margin:"dense",id:"couverture",label:"Image de couverture",type:"url",fullWidth:!0,onChange:function(e){return f(e.target.value)}}),Object(g.jsx)(Q.a,{triangle:"hide",colors:["#f00","#0f0","#00f"],onChangeComplete:function(e,t){return m(e.hex)}})]}),Object(g.jsxs)(V.a,{children:[Object(g.jsx)(j.a,{onClick:x,color:"primary",children:"Annuler"}),Object(g.jsx)(j.a,{onClick:function(){c(s,b,h),x()},color:"primary",children:"Ajouter"})]})]})}function q(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)([]),a=Object(u.a)(i,2),l=a[0],j=a[1],d=Object(r.useState)(!1),b=Object(u.a)(d,2),f=b[0],p=b[1];return Object(r.useEffect)((function(){v(c)}),[]),Object(g.jsx)("div",{className:"Appli",children:n?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(y,{utilisateur:n}),Object(g.jsxs)("section",{className:"contenu-principal",children:[Object(g.jsx)(B,{utilisateur:n,dossiers:l,setDossiers:j}),Object(g.jsx)(Y,{ouvert:f,setOuvert:p,gererAjoutDossier:function(e,t,r){(function(e,t){return W.apply(this,arguments)})(n.uid,{titre:e,couverture:t,couleur:r}).then((function(e){return j([].concat(Object(o.a)(l),[Object(s.a)({id:e.id},e.data())]))}))}}),Object(g.jsx)(T.a,{onClick:function(){return p(!0)},className:"ajoutRessource",color:"primary","aria-label":"Ajouter dossier",children:Object(g.jsx)(G.a,{})})]})]}):Object(g.jsx)(N,{})})}a.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(q,{})}),document.getElementById("racine"))}},[[284,1,2]]]);
//# sourceMappingURL=main.25e5ccc2.chunk.js.map